import{O as P,S as v,a as A}from"./stats-widget-Jvz1JHcD.js";import{S as C,P as E,W as x,L as K,a as L,C as D}from"./three-loader-3diles-lsJcE5pf.js";import{g as T}from"./lil-gui.module.min-eVeCAemg.js";const o=document.querySelector("#canvas-parent"),u=document.querySelector("#stats-widget"),c=new C,a=new E(45,1,10,1e5),d=new x;d.preserveDrawingBuffer=!0;const W=new D,m=new P(a,o);m.listenToKeyEvents(window);o.appendChild(d.domElement);const s=new v;s.domElement.style.position="absolute";s.domElement.style.top="10px";s.domElement.style.left="10px";o.appendChild(s.domElement);const e=new URLSearchParams(document.location.search),j=document.getElementById("copyright");B();const w=e.get("lat")??35.6586,y=e.get("long")??139.7454,f=e.get("height")??100,n={lat:w,long:y,height:f,googleApiKey:e.get("googleApiKey")??"",reload:q};function q(){window.location.hostname!=="nytimes.github.io"&&e.set("googleApiKey",n.googleApiKey),e.set("lat",n.lat),e.set("long",n.long),e.set("height",n.height),window.history.replaceState({},"","?"+e.toString()),window.location.reload()}let t,g;async function B(){const h=await K.load({url:"https://tile.googleapis.com/v1/3dtiles/root.json",viewport:b(),options:{googleApiKey:window.location.hostname==="nytimes.github.io"?"AIzaSyD7mJdqBYNwSP6RUQcmstZ6DXfn3rf5wkM":e.get("googleApiKey")??"",dracoDecoderPath:"https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/libs/draco",basisTranscoderPath:"https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/libs/basis",pointCloudColoring:L.RGB,maximumScreenSpaceError:e.get("sse")??24}}),{model:l,runtime:r}=h;t=r,p(),c.add(l),c.add(r.getTileBoxes()),g=new A(r.getStats(),{container:u}),u.style.visibility="visible",r.orientToGeocoord({lat:Number(w),long:Number(y),height:Number(f)}),a.translateY(1e3),m.update()}function S(h){const l=W.getDelta();m.update(),t&&t.update(l,a),g&&g.update(),d.render(c,a),s.update(),j.innerHTML=(t==null?void 0:t.getDataAttributions())??"",window.requestAnimationFrame(S)}p();function p(){d.setSize(o.clientWidth,o.clientHeight),t==null||t.setViewport(b()),a.aspect=o.clientWidth/o.clientHeight,a.updateProjectionMatrix()}window.addEventListener("resize",p);function b(){return{width:o.clientWidth,height:o.clientHeight,devicePixelRatio:window.devicePixelRatio}}const i=new T().title("Query params");i.width=300;i.add(n,"lat");i.add(n,"long");i.add(n,"height");window.location.hostname!=="nytimes.github.io"&&i.add(n,"googleApiKey");i.add(n,"reload");i.open();S();
